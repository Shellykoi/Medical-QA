# 医疗知识图谱问答系统 - 实验要求完成情况报告

## 实验要求检查

### ✅ 1. 复现项目完成本地部署
**完成状态：已完成**
- ✅ 项目已成功在本地部署
- ✅ 支持多种运行方式：Web界面、GUI界面、命令行
- ✅ 所有依赖包已安装并配置完成
- ✅ 系统运行正常，可以正常问答

**实现方式：**
- Web服务器：`python3 web_server.py` (访问 http://localhost:8080)
- GUI界面：`python3 medical_qa_gui.py`
- 命令行：`python3 medical_qa_system.py`

### ✅ 2. 实现数据爬取和数据MongoDB存储
**完成状态：已完成**
- ✅ 数据爬取代码已实现 (`prepare_data/data_spider.py`)
- ✅ MongoDB存储功能已实现
- ✅ 爬取目标：寻医问药网 (jib.xywy.com)
- ✅ 爬取内容：疾病基本信息、症状、病因、预防、检查、治疗、食物、药物等

**实现细节：**
```python
# 爬取的数据类型
- basic_info: 基本信息（疾病名称、描述、分类）
- cause_info: 病因信息
- prevent_info: 预防信息
- symptom_info: 症状信息
- inspect_info: 检查信息
- treat_info: 治疗信息
- food_info: 食物信息
- drug_info: 药物信息
```

### ⚠️ 3. 补充并发症信息的爬取代码
**完成状态：部分完成**
- ✅ 已有并发症关系爬取代码 (`rels_acompany`)
- ⚠️ 需要完善并发症信息的详细爬取

**需要完善的部分：**
```python
# 在 data_spider.py 中需要添加
def complication_spider(self, url):
    """并发症信息爬取"""
    # 爬取疾病并发症信息
    pass
```

### ✅ 4. 实现MongoDB数据处理，并输出为json数据
**完成状态：已完成**
- ✅ MongoDB数据处理代码已实现 (`prepare_data/build_data.py`)
- ✅ JSON数据输出已实现 (`data/medical.json`)
- ✅ 数据格式标准化完成
- ✅ 包含8807个疾病信息

**数据处理流程：**
1. 从MongoDB读取原始数据
2. 数据清洗和标准化
3. 实体关系提取
4. 输出为JSON格式

## 知识图谱构建

### ✅ 知识图谱导入功能
**完成状态：已完成**
- ✅ 知识图谱构建代码已实现 (`build_medicalgraph.py`)
- ✅ 支持Neo4j数据库导入
- ✅ Web界面提供知识图谱构建功能
- ✅ 支持在线构建和查看统计信息

**知识图谱结构：**
- 疾病节点：8,807个
- 症状节点：5,998个
- 药物节点：2,000+个
- 关系数量：300K+

## 前端界面优化

### ✅ 界面设计优化
**完成状态：已完成**
- ✅ 去除框框限制，全屏显示
- ✅ 美观清新的设计风格
- ✅ 简洁清晰的布局
- ✅ 响应式设计，支持移动端

**新增功能：**
- 🎨 现代化渐变背景
- 💬 智能问答界面
- 🕸️ 知识图谱可视化
- 📊 数据统计展示
- 🔄 在线知识图谱构建

## 项目文件结构

```
QASystemOnMedicalKG-master/
├── web_server.py              # Web服务器（主程序）
├── templates/
│   └── index.html             # 前端界面
├── medical_qa_gui.py          # GUI界面
├── medical_qa_system.py       # 命令行版本
├── build_medicalgraph.py      # 知识图谱构建
├── prepare_data/
│   ├── data_spider.py         # 数据爬取
│   ├── build_data.py          # 数据处理
│   └── max_cut.py             # 分词处理
├── data/
│   └── medical.json           # 医疗数据（8807个疾病）
├── dict/                      # 词典文件
├── requirements.txt           # 依赖包列表
└── 使用说明.md                # 详细使用说明
```

## 运行指南

### 1. 启动Web服务器（推荐）
```bash
# 安装依赖
python3 -m pip install -r requirements.txt

# 启动服务器
python3 web_server.py

# 访问界面
# 浏览器打开：http://localhost:8080
```

### 2. 知识图谱构建
```bash
# 方法1：通过Web界面
# 访问 http://localhost:8080，点击"知识图谱"标签页，点击"加载知识图谱"

# 方法2：命令行构建
python3 build_medicalgraph.py
```

### 3. 数据爬取（可选）
```bash
# 启动数据爬取
python3 prepare_data/data_spider.py

# 数据处理
python3 prepare_data/build_data.py
```

## 总结

### ✅ 已完成的要求
1. ✅ 复现项目完成本地部署
2. ✅ 实现数据爬取和数据MongoDB存储
3. ✅ 实现MongoDB数据处理，并输出为json数据
4. ✅ 知识图谱导入功能
5. ✅ 前端界面优化

### ⚠️ 需要完善的部分
1. ⚠️ 并发症信息爬取代码需要补充完善
2. ⚠️ Neo4j数据库配置（可选，当前使用JSON数据）

### 🎯 项目亮点
- 美观的全屏Web界面
- 完整的知识图谱问答系统
- 支持多种运行方式
- 数据爬取和处理完整
- 在线知识图谱构建功能

**项目已基本完成所有实验要求，可以正常运行和使用！**
